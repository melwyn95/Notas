(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e){e.exports={document:{nodes:[{object:"block",type:"paragraph",nodes:[]}]}}},308:function(e,t,n){e.exports=n(568)},313:function(e,t,n){},374:function(e,t,n){},567:function(e,t,n){},568:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(26),c=n.n(o),l=(n(313),n(205)),s=n(206),i=n(240),u=n(207),d=n(242),f=n(42),p=n(50),m=n(21),b=n(100),h=n.n(b),v=n(20),w=n(94),g=n.n(w),O=Object(v.withStyles)(function(e){return{root:{color:"#969696"}}})(function(e){var t=e.classes;return a.a.createElement("div",{style:{width:"100%",height:"50vh",display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement(g.a,Object.assign({className:t.root},e)))}),E=(n(374),Object(r.createContext)()),j=E,k=n(209),y=function(e){return 2===e.id},x=function(e,t){var n=e>12?"PM":"AM";return"".concat(e%12||12,":").concat(t," ").concat(n)},C=function(e){var t=(new Date).getTime()-e,n=new Date(e),r=n.toDateString(),a=n.toTimeString().split(":"),o=Object(k.a)(a),c=o[0],l=o[1],s=(o.slice(2),r.split(" ")),i=Object(m.a)(s,4),u=i[0],d=i[1],f=i[2],p=i[3],b=x(c,l);return t<=864e5?x(c,l):t<=6048e5?"".concat(u," ").concat(b):t<=24192e5?"".concat(u," ").concat(f," ").concat(b):t<=314496e5?"".concat(u," ").concat(f," ").concat(d):"".concat(f," ").concat(d," ").concat(p)},S={operation:"delete",label:"Delete"},N={operation:"move",label:"Move"},F={operation:"restore",label:"Restore"},I=n(6),D=n.n(I),_=n(19),T=n(7),R=n(49),B=n(211),P={label:"white",value:"#f5f5f5",circleColor:"#e0e0e0",optionColor:"#fbc02d"},z=[P,{label:"red",value:"#ef9a9a",circleColor:"#ef5350",optionColor:"#ef5350"},{label:"green",value:"#a5d6a7",circleColor:"#43a047",optionColor:"#43a047"},{label:"blue",value:"#90caf9",circleColor:"#1e88e5",optionColor:"#1e88e5"},{label:"yellow",value:"#fff59d",circleColor:"#fbc02d",optionColor:"#fbc02d"}],M=function(e,t){var n=z.filter(function(t){return t.label===e})[0];return n?n[t]:P.value},A=z,q="create_note",H="get_all_notes",J="delete_notes",L="move_notes",V="get_note_by_id",W="change_note_color",K="save_note",U="get_notes_by_ids",$=function(){var e=Object(_.a)(D.a.mark(function e(t,n,r){var a,o,c;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.transaction("folders","readonly"),o=a.objectStore("folders"),e.next=4,o.get(n);case 4:c=e.sent,r(c);case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),G=function(e,t){switch(e){case q:var n=t.idb,r=t.openedFolder,a=t.setOpenedFolder,o=t.changeRoute,c=(new Date).getTime();n.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var n,a,o,l;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes","folders"],"readwrite"),a=n.objectStore("notes"),o=n.objectStore("folders"),e.next=5,o.get(r.id);case 5:return(l=e.sent).count+=1,o.put(l),a.add({color:P.label,content:"",previewContent:"",structuredContent:B,heading:"",folderId:r.id,creationTimestamp:c,lastModifiedTimestamp:c}),e.abrupt("return",n.complete);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){a(r),n.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var n,r,a,l;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes"],"readonly"),r=n.objectStore("notes"),a=r.index("notesCreationTimestamp"),e.next=5,a.get(c);case 5:l=e.sent,o(l.id);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())});break;case H:var l=t.idb,s=t.openedFolder,i=t.setFetching,u=t.setNotes,d=[];s&&l.then(function(e){i(!0);var t=e.transaction("notes","readonly").objectStore("notes").index("notesFolderId"),n=IDBKeyRange.only(s.id);return 1===s.id&&(n=void 0),t.openCursor(n)}).then(function e(t){if(t){if(2===t.value.folderId&&2!==s.id)return t.continue().then(e);var n=t.value;return d.push(n),t.continue().then(e)}}).then(function(){u(d),i(!1)});break;case J:var f=t.idb,p=t.selection,m=t.openedFolder,b=t.setOpenedFolder;f.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var n,r,a,o,c,l;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),r=t.transaction(["notes","folders"],"readwrite"),a=r.objectStore("notes"),o=r.objectStore("folders"),e.next=6,o.get(2);case 6:return c=e.sent,2===m.id?(p.map(function(e){return a.delete(e)}),c.count-=p.length):((l={})[1]=p.length,p.map(function(){var e=Object(_.a)(D.a.mark(function e(t){var n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get(+t);case 2:n=e.sent,l[n.folderId]?l[n.folderId]+=1:l[n.folderId]=1,n.folderId=2,a.put(n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),Object.keys(l).map(function(){var e=Object(_.a)(D.a.mark(function e(t){var r;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.get(+t);case 2:(r=e.sent).count-=l[t],r.timestamp=n,o.put(r);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),c.count+=p.length,c.timestamp=n,o.put(c)),e.abrupt("return",r.complete);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){f.then(function(e){return $(e,m.id,b)})});break;case L:var h=t.idb,v=t.selection,w=t.openedFolder,g=t.setOpenedFolder,O=t.moveToFolderId;h.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var n,r,a,o,c,l;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),r=t.transaction(["folders","notes"],"readwrite"),a=r.objectStore("notes"),o=r.objectStore("folders"),c={},e.next=7,o.get(+O);case 7:return l=e.sent,e.next=10,Promise.all(v.map(function(){var e=Object(_.a)(D.a.mark(function e(t){var n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get(+t);case 2:return n=e.sent,c[n.folderId]?c[n.folderId]+=1:c[n.folderId]=1,n.folderId=l.id,e.abrupt("return",a.put(n));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 10:return 2===+O?c[1]=v.length:delete c[1],e.next=13,Promise.all(Object.keys(c).map(function(){var e=Object(_.a)(D.a.mark(function e(t){var r;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.get(+t);case 2:return(r=e.sent).count-=c[t],r.timestamp=n,e.abrupt("return",o.put(r));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 13:return l.count+=v.length,l.timestamp=n,o.put(l),e.abrupt("return",r.complete);case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){h.then(function(e){return $(e,w.id,g)})});break;case V:var E=t.noteId,j=t.idb,k=t.setNote,y=t.setValue;return j.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var n,r,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes"],"readonly"),r=n.objectStore("notes"),e.next=4,r.get(Number.parseInt(E));case 4:a=e.sent,y(T.m.fromJSON(a.structuredContent)),k(a);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case W:var x=t.note,C=t.idb,S=t.setNote,N=t.color;return C.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var n,r,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes"],"readwrite"),r=n.objectStore("notes"),e.next=4,r.get(x.id);case 4:return(a=e.sent).color=N,r.put(a),e.abrupt("return",n.complete);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){C.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var n,r,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes"],"readwrite"),r=n.objectStore("notes"),e.next=4,r.get(x.id);case 4:a=e.sent,S(a);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())});case K:var F=t.idb,I=t.note,z=I.id,M=I.folderId,A=t.value,G=t.setNote,Q=R.a.serialize(A);return F.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var n,r,a,o,c,l;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes","folders"],"readwrite"),r=n.objectStore("notes"),a=n.objectStore("folders"),e.next=5,r.get(z);case 5:return o=e.sent,e.next=8,a.get(M);case 8:return c=e.sent,l=(new Date).getTime(),o.content=Q,o.previewContent=Q.substr(0,80),o.structuredContent=A.toJSON(),o.lastModifiedTimestamp=l,c.timestamp=l,r.put(o),a.put(c),e.abrupt("return",n.complete);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){F.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var n,r,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes"],"readonly"),r=n.objectStore("notes"),e.next=4,r.get(z);case 4:a=e.sent,G(a);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())});case U:var X=t.idb,Y=t.noteIds,Z=t.setNotes;return X.then(function(e){var t=e.transaction(["notes"],"readonly").objectStore("notes");Promise.all(Y.map(function(e){return t.get(e)})).then(function(e){return Z(e)})});default:console.log("INVALID_OPERATION")}},Q={label:"Rename",operation:"open_rename_folder_modal"},X={label:"Delete",operation:"open_delete_folder_modal"},Y="open_create_folder_modal",Z={operation:"rename_folder"},ee="delete_folder",te={operation:"create_foler"},ne="get_all_notes_folder",re="get_all_folders",ae=[Q,X,{label:"Open Settings",operation:"open_settings"}],oe=function(){var e=Object(_.a)(D.a.mark(function e(t,n,r){var a,o,c,l,s,i,u,d,f,p,m,b,h,v,w,g,O,E,j,k,y;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===Q.operation?3:e.t0===X.operation?6:e.t0===Z.operation?9:e.t0===ee?12:e.t0===Y?15:e.t0===te.operation?19:e.t0===ne?22:e.t0===re?25:28;break;case 3:return(0,r.setOpen)(Z.operation),e.abrupt("break",29);case 6:return(0,r.setOpen)(ee),e.abrupt("break",29);case 9:return a=r.setOpenedFolder,o=r.idb,c=r.value,l=r.close,s=r.setSnackError,o.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var r,a,o;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.transaction("folders","readwrite"),a=r.objectStore("folders"),e.next=4,a.get(n);case 4:return(o=e.sent).name=c,o.timestamp=(new Date).getTime(),a.put(o),e.abrupt("return",r.complete);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){o.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var r,o,c;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.transaction("folders","readonly"),o=r.objectStore("folders"),e.next=4,o.get(n);case 4:c=e.sent,a(c),l();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}).catch(function(){s("A folder with the same name already exists.")}),e.abrupt("break",29);case 12:return i=r.setOpenedFolder,(u=r.idb).then(function(e){var t=e.transaction("folders","readwrite");return t.objectStore("folders").delete(n),t.complete}).then(function(){u.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var n,r,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction("folders","readonly"),r=n.objectStore("folders"),e.next=4,r.get(1);case 4:a=e.sent,i(a);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}),e.abrupt("break",29);case 15:return d=r.setShowDropdown,f=r.setOpen,d(!1),f(te.operation),e.abrupt("break",29);case 19:return p=r.idb,m=r.setOpenedFolder,b=r.value,h=r.close,v=r.setSnackError,p.then(function(e){var t=e.transaction("folders","readwrite");return t.objectStore("folders").add({name:b,count:0}),t.complete}).then(function(){p.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var n,r,a,o;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction("folders","readonly"),r=n.objectStore("folders"),a=r.index("folderNames"),e.next=5,a.get(b);case 5:o=e.sent,m(o),h();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}).catch(function(){v("A folder with the same name already exists.")}),e.abrupt("break",29);case 22:return w=r.idb,g=r.setOpenedFolder,w.then(function(){var e=Object(_.a)(D.a.mark(function e(t){var r,a,o;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.transaction("folders","readonly"),a=r.objectStore("folders"),e.next=4,a.get(n);case 4:o=e.sent,g(o);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),e.abrupt("break",29);case 25:return O=r.idb,E=r.setFolders,j=r.foldersToExclude,k=void 0===j?[]:j,y=[],e.abrupt("return",O.then(function(e){return e.transaction("folders","readonly").objectStore("folders").openCursor()}).then(function e(t){if(t){if(k.includes(t.value.id))return t.continue().then(e);var n=t.value;return y.push(n),t.continue().then(e)}}).then(function(){E(y)}));case 28:console.log("INVALID_OPERATION");case 29:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),ce=n(212),le=n(48),se=n.n(le),ie=n(105),ue=n.n(ie),de=n(213),fe=n.n(de),pe=n(33),me=n.n(pe),be={padding:"0 12px"},he=Object(v.withStyles)(function(e){return{heading:{lineHeight:"42px",fontSize:"16px",fontWeight:700}}})(function(e){var t=e.selection,n=e.setSelection,o=e.clearDropDown,c=e.notes,l=e.classes,s=Object(r.useCallback)(function(){n([])},[]),i=Object(r.useCallback)(function(){t.length===c.length?n([]):n(c.map(function(e){return e.id}))},[t]);Object(r.useEffect)(function(){return o()},[]);var u=Object(r.useMemo)(function(){return c.length===t.length},[t]);return a.a.createElement("div",{className:"container--selectionn-header"},a.a.createElement(me.a,{style:be,onClick:s},a.a.createElement(ue.a,null)),a.a.createElement(se.a,{component:"h2",className:l.heading},1===t.length?"1 item selected":"".concat(t.length," items selected")),a.a.createElement(me.a,{style:be,onClick:i},a.a.createElement(fe.a,{style:u?{color:"#1e88e5"}:{}})))}),ve=n(30),we=n.n(ve),ge=n(95),Oe=n.n(ge),Ee=n(96),je=n.n(Ee),ke=n(60),ye=n.n(ke),xe=Object(p.f)(function(e){var t=e.folders,n=e.setShowDropdown,o=e.openedFolder,c=e.setOpen,l=e.show,s=e.history;return!t&&l?a.a.createElement(O,null):a.a.createElement("div",{className:"container--list-item",style:l?{}:{maxHeight:0,opacity:0}},l&&t.map(function(e){return a.a.createElement(r.Fragment,{key:"list-item-".concat(e.id)},a.a.createElement("div",{className:"list-item",onClick:function(){return function(e,t){return t.push("/folder/".concat(e.id))}(e,s)}},a.a.createElement("div",{className:"list-item-label ".concat(o.id===e.id?"list-item-label__bold":"")},e.name),a.a.createElement("div",{className:"list-item-label ".concat(o.id===e.id?"list-item-label__bold":"")},e.count)),a.a.createElement("div",{className:"separator"}))}),l&&a.a.createElement("div",{className:"list-item",key:"new-folder",onClick:function(){oe(Y,void 0,{setShowDropdown:n,setOpen:c})}},a.a.createElement("div",{className:"new-folder-container"},a.a.createElement("div",{className:"plus-icon"},"+"),"New Folder")))}),Ce=n(28),Se=n.n(Ce),Ne=n(59),Fe=n.n(Ne),Ie=Object(v.withStyles)(function(e){return{root:{height:150,width:250},rootTextField:{backgroundColor:"#eee"}}})(function(e){var t=e.classes,n=e.openedFolder,o=e.close,c=e.setOpenedFolder,l=e.create,s=e.setSnackError,i=l?"New Folder":"Rename Folder",u=l&&te.operation||Z.operation,d=Object(r.useContext)(j).idb,f=Object(r.useState)(l?"Unnamed Folder":n.name),p=Object(m.a)(f,2),b=p[0],h=p[1];return a.a.createElement(Se.a,{className:t.root},a.a.createElement("div",null,i),a.a.createElement(Fe.a,{value:b,className:t.rootTextField,InputProps:{classes:{root:t.rootTextField,focussed:t.rootTextField}},onChange:function(e){return h(e.target.value)},variant:"outlined"}),a.a.createElement(we.a,{onClick:function(){oe(u,n.id,{setOpenedFolder:c,idb:d,value:b,close:o,setSnackError:s})}},"Ok"),a.a.createElement(we.a,{onClick:o}," Cancel"))}),De=Object(v.withStyles)(function(e){return{root:{height:150,width:250}}})(function(e){var t=e.classes,n=e.close,o=e.openedFolder,c=e.setOpenedFolder,l=Object(r.useContext)(j).idb;return a.a.createElement(Se.a,{className:t.root},a.a.createElement("div",null,"Delete Folder"),a.a.createElement("div",null,"Delete ".concat(o.name," ?")),a.a.createElement(we.a,{onClick:function(){oe(ee,o.id,{setOpenedFolder:c,idb:l}),n()}},"Delete"),a.a.createElement(we.a,{onClick:n},"Cancel"))}),_e=function(e){var t=e.setShowDropdown,n=e.showDropdown,r=e.openedFolder.name;return a.a.createElement("div",{className:"container--dropdown"},a.a.createElement(we.a,{onClick:function(e){e.stopPropagation(),t(!n)}},a.a.createElement("div",{className:"dropdown-content"},a.a.createElement("div",{className:"dropdown-text"},r),a.a.createElement("div",{className:n?"dropdown-icon dropdown-icon-rotate":"dropdown-icon"}))))},Te=function(e){var t=e.showDropdown,n=e.setShowDropdown,r=e.setAnchorEl;return!t&&a.a.createElement("div",{className:"container--more-options",style:t?{}:{maxHeight:0}},a.a.createElement(me.a,{onClick:function(e){e.stopPropagation(),r(e.currentTarget),n(!1)}},a.a.createElement("div",{className:"more-options"})))},Re=function(e){var t=e.anchorEl,n=e.setAnchorEl,r=e.openedFolder,o=e.setOpen,c=e.close;return a.a.createElement(Oe.a,{anchorEl:t,open:Boolean(t),onClose:function(e){return n(null)}},ae.map(function(e){if(!r.systemFolder||"open_settings"===e.operation)return a.a.createElement(je.a,{key:r.timestamp,style:{fontSize:14},onClick:function(t){oe(e.operation,r.id,{setOpen:o,close:c})}},e.label)}))},Be=function(e){var t=e.openedFolder,n=e.setOpenedFolder,o=e.setSnackError,c=e.showDropdown,l=e.setShowDropdown,s=Object(r.useState)([]),i=Object(m.a)(s,2),u=i[0],d=i[1],f=Object(r.useState)(null),p=Object(m.a)(f,2),b=p[0],h=p[1],v=Object(r.useContext)(j).idb,w=Object(r.useState)(null),g=Object(m.a)(w,2),O=g[0],E=g[1],k=Object(r.useCallback)(function(){E(!1),h(null)},[]);return Object(r.useEffect)(function(){oe(re,void 0,{idb:v,setFolders:d})},[t]),a.a.createElement(r.Fragment,null,a.a.createElement("div",{className:"container--header"},a.a.createElement(_e,{setShowDropdown:l,showDropdown:c,openedFolder:t}),a.a.createElement(Te,{showDropdown:c,setShowDropdown:l,setAnchorEl:h}),a.a.createElement(Re,{anchorEl:b,setAnchorEl:h,openedFolder:t,setOpen:E,close:k})),a.a.createElement(xe,{folders:u,setShowDropdown:l,setOpen:E,openedFolder:t,show:c}),a.a.createElement(ye.a,{open:Boolean(O),onClose:k},[Z.operation,te.operation].includes(O)?a.a.createElement(Ie,{openedFolder:t,close:k,setOpenedFolder:n,create:O===te.operation,setSnackError:o}):a.a.createElement(De,{openedFolder:t,close:k,setOpenedFolder:n})))},Pe=function(e){var t=e.selection,n=e.notes,r=e.setSelection,o=e.clearDropDown,c=Object(ce.a)(e,["selection","notes","setSelection","clearDropDown"]);return t.length?a.a.createElement(he,{selection:t,setSelection:r,clearDropDown:o,notes:n}):a.a.createElement(Be,c)},ze=n(106),Me=n(216),Ae=n.n(Me),qe=n(77),He=n.n(qe),Je=n(107),Le=Object(Je.a)("\n    export function search(folderId, searchText) {\n            \n        return new Promise(function (resolve, reject) {\n            \n            var openRequest = indexedDB.open('notas', 1);\n\n            var dbPromise = new Promise(function (resolve1, reject1) {\n                openRequest.onsuccess = function(e) {\n                    resolve1(e.target.result);\n                };\n            }).then(function (db) {\n                var transaction = db.transaction(['notes'], 'readonly');\n                var store = transaction.objectStore('notes');\n                var index = store.index('notesFolderId');\n                var keyRange = folderId !== 1 ? IDBKeyRange.only(folderId) : undefined;\n                var filteredNoteIds = [];\n\n                var cursorPromise = new Promise(function (resolve2, reject2) {\n                    index.openCursor(keyRange).onsuccess = function (event) {\n                        var cursor = event.target.result;\n                        if(cursor) {\n                            var note = cursor.value;\n                            if (note.content.indexOf(searchText) >= 0) {\n                                filteredNoteIds.push(note.id)\n                            }\n                            cursor.continue();\n                        } else {\n                            resolve(filteredNoteIds);\n                        }\n                    };\n                });\n                \n            });\n        });\n    }\n"),Ve=Object(ze.debounce)(function(){var e=Object(_.a)(D.a.mark(function e(t,n,r,a){var o;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.search(t,n);case 2:o=e.sent,G(U,{idb:r,noteIds:o,setNotes:a});case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),400),We=Object(v.withStyles)(function(e){return{root:{maxHeight:30,width:"100%",background:"#dcdcdc",borderRadius:"5px"},notchedOutline:{border:0},marginRight:{marginRight:"-20px"},marginLeft:{marginLeft:"-15px"},fontSize:{fontSize:"12px"}}})(function(e){var t=e.classes,n=e.openedFolder,o=e.setNotes,c=Object(r.useContext)(j).idb,l=Object(r.useState)(""),s=Object(m.a)(l,2),i=s[0],u=s[1],d=Object(r.useCallback)(function(){Ve(n.id,"",c,o),u("")},[n]);return a.a.createElement("div",{className:"container--search-bar"},a.a.createElement(Fe.a,{className:t.root,style:{fontSize:17},value:i,placeholder:"Search notes",onChange:function(e){Ve(n.id,e.target.value,c,o),u(e.target.value)},variant:"outlined",InputProps:{startAdornment:a.a.createElement(He.a,{position:"start"},a.a.createElement(me.a,{className:t.marginLeft},a.a.createElement(Ae.a,{style:{fontSize:"17px"}}))),endAdornment:Boolean(i)&&a.a.createElement(He.a,{position:"end"},a.a.createElement(me.a,{className:t.marginRight,onClick:d},a.a.createElement(ue.a,{style:{fontSize:"17px"}}))),classes:{input:t.fontSize,notchedOutline:t.notchedOutline}}}))}),Ke=n(241),Ue=n(97),$e=n.n(Ue),Ge=n(98),Qe=n.n(Ge),Xe=n(217),Ye=n.n(Xe),Ze=n(218),et=n.n(Ze),tt=function(e){var t=e.children,n=e.style,r=e.className;return a.a.createElement("span",{style:n,className:r},t)},nt=function(e){var t=e.color;return{backgroundColor:M(t,"value"),position:"relative"}},rt=Object(v.withStyles)(function(e){return{root:{height:"180px",width:"140px",boxSizing:"border-box",padding:"10px",margin:"5px"},content:{color:"#555",fontSize:"14px",textOverflow:"ellipsis",overflow:"hidden",height:"calc(100% - 35px)"}}})(function(e){var t=e.note,n=e.note.previewContent,o=e.classes,c=e.selection,l=e.setSelection,s=e.history,i=Object(r.useMemo)(function(){return c.includes(t.id)},[c,t.id]),u=Object(r.useCallback)(function(e){e.stopPropagation(),l(i?c.filter(function(e){return e!==t.id}):[].concat(Object(Ke.a)(c),[t.id]))},[c,t.id]),d=Object(r.useCallback)(function(){s.push("/note/".concat(t.id))},[t.id]);return a.a.createElement($e.a,{className:o.root,style:nt(t),onClick:d},a.a.createElement("p",{className:o.content},a.a.createElement("strong",{style:{color:"#000"}},n.substr(0,21)),n.substr(21)),a.a.createElement("div",{className:"time-stamp-wrappper"},a.a.createElement(tt,{className:"text-view-content"},C(t.lastModifiedTimestamp))),a.a.createElement(Qe.a,{style:{position:"absolute",bottom:0,right:0,padding:"5px",zIndex:"2"},checked:i,icon:a.a.createElement(Ye.a,{style:{color:"#1e88e5"}}),checkedIcon:a.a.createElement(et.a,{style:{color:"#1e88e5"}}),onClick:u}))}),at=function(){return a.a.createElement("div",{style:{margin:"50% auto",alignSelf:"center",fontSize:"18px",fontWeight:500,color:"#6d6d6d"}},"No Notes Here")},ot=Object(p.f)(Object(r.memo)(function(e){var t=e.selection,n=e.setSelection,r=e.fetching,o=e.notes,c=e.history;return a.a.createElement("div",{className:"container--notes"},Boolean(o.length)?o.map(function(e){return a.a.createElement(rt,{key:e.creationTimestamp,note:e,history:c,selection:t,setSelection:n})}):r?a.a.createElement(O,null):a.a.createElement(at,null))},function(e,t){var n=e.notes,r=e.selection,a=e.fetching,o=t.notes,c=t.selection,l=t.fetching;return n===o&&r===c&&a===l})),ct=n(99),lt=n.n(ct),st=n(219),it=n.n(st),ut=Object(p.f)(Object(v.withStyles)(function(e){return{fabRoot:{backgroundColor:"#ffc400","&:hover":{backgroundColor:"#ffab00"}},iconRoot:{color:"#fff",fontSize:"35px"}}})(function(e){var t=e.history,n=e.classes,o=e.openedFolder,c=e.setOpenedFolder,l=e.show,s=Object(r.useContext)(j).idb,i=Object(r.useCallback)(function(e){t.replace("/note/".concat(e))},[]),u=Object(r.useCallback)(function(){G(q,{idb:s,openedFolder:o,setOpenedFolder:c,changeRoute:i})},[o]);return l&&a.a.createElement("div",{className:"container--add-notes"},a.a.createElement(lt.a,{className:n.fabRoot,onClick:u},a.a.createElement(it.a,{className:n.iconRoot})))})),dt=n(220),ft=n.n(dt),pt=n(222),mt=n.n(pt),bt=n(221),ht=n.n(bt),vt=n(76),wt=n.n(vt),gt=n(61),Ot=n.n(gt),Et=n(78),jt=n.n(Et),kt=n(79),yt=n.n(kt),xt=function(e){var t=e.option,n=e.className,r=e.Icon,o=e.callback;return a.a.createElement("div",{className:"container--bottom-tool-button"},a.a.createElement(we.a,{className:n,onClick:o},a.a.createElement(r,null),a.a.createElement("span",{className:"bottom-button-text"},t.label)))},Ct=Object(v.withStyles)(function(e){return{buttonRoot:{width:"100%",height:"100%"},listItemPrimary:{maxWidth:"175px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},flexJustifyCenter:{display:"flex",justifyContent:"center"}}})(function(e){var t=e.classes,n=e.options,o=e.show,c=e.openedFolder,l=e.selection,s=e.setOpenedFolder,i=e.setSelection,u=(e.setCreateDialogOpen,Object(r.useContext)(j).idb),d=Object(r.useState)(!1),f=Object(m.a)(d,2),p=f[0],b=f[1],h=Object(r.useState)([]),v=Object(m.a)(h,2),w=v[0],g=v[1],O=Object(r.useCallback)(function(){G(J,{idb:u,selection:l,openedFolder:c,setOpenedFolder:s}),i([])},[l]),E=Object(r.useCallback)(function(e){G(L,{idb:u,selection:l,openedFolder:c,setOpenedFolder:s,moveToFolderId:e}),i([]),k()},[l]),k=Object(r.useCallback)(function(){b(!1)},[]),y=Object(r.useCallback)(Object(_.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[c.id],e.next=3,oe(re,c.id,{idb:u,setFolders:g,foldersToExclude:t});case 3:b(!0);case 4:case"end":return e.stop()}},e,this)})),[c]);return a.a.createElement("div",{className:"container--bottom-toolbar",style:o?{}:{height:0}},n.map(function(e){return a.a.createElement(xt,Object.assign({key:e.operation,className:t.buttonRoot},function(e){switch(e.operation){case N.operation:return{option:e,Icon:ft.a,callback:y};case F.operation:return{option:e,Icon:ht.a,callback:function(){return E(1)}};case S.operation:return{option:e,Icon:mt.a,callback:O};default:return function(){}}}(e)))}),a.a.createElement(ye.a,{open:p,onClose:k,scroll:"paper"},a.a.createElement(Ot.a,null,a.a.createElement(jt.a,{primary:"Select Folder",classes:{primary:t.flexJustifyCenter}})),a.a.createElement(yt.a,null),a.a.createElement(wt.a,{style:{maxHeight:"80vh",padding:0}},w.map(function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ot.a,{button:!0,classes:{root:t.flexJustifyCenter},onClick:function(){return E(e.id)},key:e.id},a.a.createElement(jt.a,{primary:e.name,classes:{primary:t.listItemPrimary}})),a.a.createElement(yt.a,null))}))))}),St=function(e){var t=e.match,n=Object(r.useContext)(j).idb,o=Object(r.useState)(null),c=Object(m.a)(o,2),l=c[0],s=c[1],i=Object(r.useState)(null),u=Object(m.a)(i,2),d=u[0],f=u[1],p=Object(r.useState)(!1),b=Object(m.a)(p,2),v=b[0],w=b[1],g=Object(r.useState)([]),E=Object(m.a)(g,2),k=E[0],x=E[1],C=Object(r.useState)([]),I=Object(m.a)(C,2),D=I[0],_=I[1],T=Object(r.useState)(!0),R=Object(m.a)(T,2),B=R[0],P=R[1],z=Object(r.useMemo)(function(){return(e=l)&&[y(e)?F:N,S]||[];var e},[l]),M=Object(r.useCallback)(function(){w(!1)},[]),A=Object(r.useCallback)(function(){f(null)},[]),q=0!==k.length,J=l&&2===l.id;return Object(r.useEffect)(function(){var e=Number.parseInt(t.params.id);oe(ne,e,{idb:n,setOpenedFolder:s})},[t]),Object(r.useEffect)(function(){G(H,{idb:n,openedFolder:l,setFetching:P,setNotes:_})},[l]),l?a.a.createElement("div",{className:"container--home-page",onClick:M},a.a.createElement(Pe,{openedFolder:l,setOpenedFolder:s,setSnackError:f,showDropdown:v,setShowDropdown:w,notes:D,selection:k,clearDropDown:M,setSelection:x}),a.a.createElement(We,{openedFolder:l,setNotes:_}),a.a.createElement(ot,{fetching:B,notes:D,selection:k,setSelection:x}),a.a.createElement(ut,{openedFolder:l,setOpenedFolder:s,fetching:B,notes:D,show:!q&&!J}),a.a.createElement(Ct,{options:z,show:q,selection:k,openedFolder:l,setSelection:x,setOpenedFolder:s}),a.a.createElement(h.a,{open:Boolean(d),autoHideDuration:2e3,onClose:A,message:d})):a.a.createElement(O,null)},Nt=n(62),Ft=n(101),It=n.n(Ft),Dt=n(223),_t=n.n(Dt),Tt=n(226),Rt=n.n(Tt),Bt=n(227),Pt=n.n(Bt),zt=n(224),Mt=n.n(zt),At=n(225),qt=n.n(At),Ht=function(e){var t=e.onClick,n=e.color;return a.a.createElement("div",{className:"container--circle-icon",style:{marginRight:10},onClick:t},a.a.createElement("div",{style:{borderRadius:"50%",backgroundColor:n,height:12,width:12}}))},Jt=function(e){var t=e.note,n=e.setNote,o=Object(r.useContext)(j).idb,c=A.filter(function(e){return e.label!==t.color});return a.a.createElement(Se.a,{style:{display:"flex",padding:5}},c.map(function(e){return a.a.createElement(Ht,{key:e.label,color:e.circleColor,onClick:function(){return r=e.label,G(W,{idb:o,setNote:n,note:t,color:r});var r}})}))},Lt=function(e){return{fontSize:25,color:M(e,"optionColor")}},Vt=function(e){var t=e.anchorEl,n=e.iconClick,o=e.backButtonClick,c=e.doneButtonClick,l=e.noteColor,s=e.note,i=e.setNote,u=e.editorRef,d=Object(r.useCallback)(function(e){e.preventDefault(),u.current.undo()},[]),f=Object(r.useCallback)(function(e){e.preventDefault(),u.current.redo()},[]);return a.a.createElement("div",{className:"container--header-toolbar"},a.a.createElement(_t.a,{style:Lt(l),onClick:o}),a.a.createElement(Ht,{color:M(l,"circleColor"),onClick:function(e){return n(e,"change_color")}}),a.a.createElement(Mt.a,{style:Object(Nt.a)({},Lt(l),{marginRight:10}),onClick:d}),a.a.createElement(qt.a,{style:Object(Nt.a)({},Lt(l),{marginRight:10}),onClick:f}),a.a.createElement(Rt.a,{style:Object(Nt.a)({},Lt(l),{marginRight:10,marginLeft:5}),onClick:c}),a.a.createElement(Pt.a,{style:Lt(l)}),a.a.createElement(It.a,{open:Boolean(t),anchorEl:t,placement:"bottom"},a.a.createElement(Jt,{note:s,setNote:i}),"s"))},Wt=n(239),Kt=n(231),Ut=n.n(Kt),$t=n(232),Gt=n.n($t),Qt=n(233),Xt=n.n(Qt),Yt=n(234),Zt=n.n(Yt),en=n(235),tn=n.n(en),nn=n(236),rn=n.n(nn),an=n(237),on=n.n(an),cn="block-quote",ln=["bold","italic","underlined"],sn=["bold","italic","underlined","heading-two",cn,"bulleted-list","numbered-list"],un=n(230),dn={fontSize:20},fn=Object(Nt.a)({color:"#000"},dn),pn=function(e,t){return t.blocks.some(function(t){return t.type===e})},mn=function(e,t,n){var r=t?function(e,t){return t.activeMarks.some(function(t){return t.type===e})}(e,n):pn(e,n);if(["numbered-list","bulleted-list"].includes(e)){var o=n.document,c=n.blocks;if(c.size>0){var l=o.getParent(c.first().key);r=pn("list-item",n)&&l&&l.type===e}}switch(e){case"bold":return a.a.createElement(Ut.a,{style:r?fn:dn});case"italic":return a.a.createElement(Gt.a,{style:r?fn:dn});case"underlined":return a.a.createElement(Xt.a,{style:r?fn:dn});case"heading-two":return a.a.createElement(Zt.a,{style:r?fn:dn});case cn:return a.a.createElement(tn.a,{style:r?fn:dn});case"bulleted-list":return a.a.createElement(rn.a,{style:r?fn:dn});case"numbered-list":return a.a.createElement(on.a,{style:r?fn:dn});default:return null}},bn=function(e){var t=e.value,n=e.editorRef,o=e.note,c=Object(r.useMemo)(function(){return M(o.color,"circleColor")},[o]);return a.a.createElement(Se.a,{style:{display:"flex",justifyContent:"space-around",boxShadow:"none",margin:"5px 0"}},sn.map(function(e){return a.a.createElement(un.a,{key:e,style:{padding:10},onClick:function(t){return ln.includes(e)?(r=e,t.preventDefault(),void n.current.toggleMark(r)):function(e,t){if(e.preventDefault(),n.current){var r=n.current.value,a=r.document;if("bulleted-list"!==t&&"numbered-list"!==t){var o=pn(t,r);pn("list-item",r)?n.current.setBlocks(o?"paragraph":t).unwrapBlock("bulleted-list").unwrapBlock("numbered-list"):n.current.setBlocks(o?"paragraph":t)}else{var c=pn("list-item",r),l=r.blocks.some(function(e){return!!a.getClosest(e.key,function(e){return e.type===t})});c&&l?n.current.setBlocks("paragraph").unwrapBlock("bulleted-list").unwrapBlock("numbered-list"):c?n.current.unwrapBlock("bulleted-list"===t?"numbered-list":"bulleted-list").wrapBlock(t):n.current.setBlocks("list-item").wrapBlock(t)}}}(t,e);var r}},mn(e,ln.includes(e),t))}),a.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n                    blockquote {\n                        border-left: 2px solid ".concat(c,";\n                    }\n                ")}}))},hn=Object(ze.debounce)(function(e,t,n,r){G(K,{idb:e,value:t,note:n,setNote:r})},600),vn=function(e){var t=e.editorRef,n=e.value,o=e.setValue,c=e.note,l=e.wordCount,s=e.setNote,i=Object(r.useContext)(j).idb;return a.a.createElement(a.a.Fragment,null,a.a.createElement(bn,{value:n,editorRef:t,note:c}),a.a.createElement("div",{className:"container--info"},a.a.createElement(tt,{className:"text-view-content"},C(c.lastModifiedTimestamp)),a.a.createElement(tt,{className:"text-view-content--separator"},"|"),a.a.createElement(tt,{className:"text-view-content"},"".concat(l," words"))),a.a.createElement(Wt.a,{spellCheck:!0,autoFocus:!0,style:{height:"calc(100% - 50px)",padding:"5px",boxSizing:"border-box",overflow:"auto"},placeholder:"Enter your note...",ref:function(e){return t.current=e},value:n,onChange:function(e){var t=e.value;hn(i,t,c,s),o(t)},onKeyDown:function(e,t,n){return n()},renderNode:function(e,t,n){var r=e.attributes,o=e.children;switch(e.node.type){case"block-quote":return a.a.createElement("blockquote",r,o);case"bulleted-list":return a.a.createElement("ul",r,o);case"heading-two":return a.a.createElement("h2",r,o);case"list-item":return a.a.createElement("li",r,o);case"numbered-list":return a.a.createElement("ol",r,o);default:return n()}},renderMark:function(e,t,n){var r=e.children,o=e.mark,c=e.attributes;switch(o.type){case"bold":return a.a.createElement("strong",c,r);case"italic":return a.a.createElement("em",c,r);case"underlined":return a.a.createElement("u",c,r);default:return n()}}}))},wn=Object(Je.a)("\n    export function wordCount(noteId) {\n            \n        return new Promise(function (resolve, reject) {\n            \n            var openRequest = indexedDB.open('notas', 1);\n\n            var dbPromise = new Promise(function (resolve1, reject1) {\n                openRequest.onsuccess = function(e) {\n                    resolve1(e.target.result);\n                };\n            }).then(function (db) {\n                var transaction = db.transaction(['notes'], 'readonly');\n                var store = transaction.objectStore('notes');\n\n                var getRequest = store.get(noteId);\n                getRequest.onsuccess = function (e) {\n                    var note = e.target.result;\n                    var words = note.content.split(/\\s+/g).filter(w => w !== '');\n                    resolve(words.length);\n                }\n                getRequest.onerror = function (e) { reject(e.target.result); };\n            });\n        });\n\n    }\n"),gn=(n(567),Object(p.f)(function(e){var t=e.match,n=e.history,o=Object(r.useContext)(j).idb,c=Object(r.useState)(null),l=Object(m.a)(c,2),s=l[0],i=l[1],u=Object(r.useState)(null),d=Object(m.a)(u,2),f=d[0],p=d[1],b=Object(r.useState)(null),h=Object(m.a)(b,2),v=h[0],w=h[1],g=Object(r.useState)(-1),E=Object(m.a)(g,2),k=E[0],y=E[1],x=Object(r.useCallback)(function(e,t){e.stopPropagation(),w(e.currentTarget)},[]),C=Object(r.useCallback)(function(){return w(null)},[]),S=Object(r.useCallback)(function(){return n.replace("/folder/".concat(s.folderId))},[s&&s.folderId]),N=Object(r.useCallback)(function(){G(K,{idb:o,note:s,value:f}),n.replace("/")},[s,f]);Object(r.useEffect)(function(){var e=t.params.id;G(V,{idb:o,setNote:i,setValue:p,noteId:e})},[]),Object(r.useEffect)(function(){s&&wn.wordCount(s.id).then(function(e){y(e)})},[s]);var F=Object(r.useRef)();return s?a.a.createElement("div",{className:"container--note-page",style:{backgroundColor:M(s.color,"value")},onClick:C},a.a.createElement(Vt,{anchorEl:v,iconClick:x,backButtonClick:S,doneButtonClick:N,noteColor:s.color,note:s,setNote:i,editorRef:F}),a.a.createElement("div",{className:"container--note-body"},a.a.createElement(vn,{value:f,setValue:p,editorRef:F,note:s,setNote:i,wordCount:k}))):a.a.createElement(O,null)})),On=function(){return a.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",flexDirection:"column",fontSize:20}},a.a.createElement("div",{style:{fontWeight:500,color:"#989797",marginBottom:20,marginTop:-50}},"404 Page Not Found"),a.a.createElement(f.b,{style:{color:"#ffc400"},to:"/"},"Home"))},En=n(238),jn="This is supposed to be a long long long note asdasdasdasdadsasddasdasddasd",kn=(new Date).getTime(),yn=function(){return Object(En.openDb)("notas",1,function(e){switch(e.oldVersion){case 0:case 1:var t=e.createObjectStore("folders",{keyPath:"id",autoIncrement:!0});t.createIndex("folderNames","name",{unique:!0}),t.add({count:1,timestamp:(new Date).getTime(),name:"All Notes",systemFolder:!0}),t.add({count:0,timestamp:(new Date).getTime(),name:"Trash",systemFolder:!0});var n=e.createObjectStore("notes",{keyPath:"id",autoIncrement:!0});n.createIndex("notesCreationTimestamp","creationTimestamp"),n.createIndex("notesLastModifiedTimestamp","lastModifiedTimestamp"),n.createIndex("notesFolderId","folderId"),n.add({color:P.label,content:jn,previewContent:jn.substr(0,80),structuredContent:R.a.deserialize(jn).toJSON(),folderId:1,creationTimestamp:kn,lastModifiedTimestamp:kn})}})},xn=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).idb=yn(),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(j.Provider,{value:{idb:this.idb}},a.a.createElement(f.a,null,a.a.createElement(p.d,null,a.a.createElement(p.b,{path:"/",exact:!0,component:function(e){return a.a.createElement(p.a,{to:{pathname:"/folder/1",state:{from:e.location}}})}}),a.a.createElement(p.b,{path:"/folder/:id",exact:!0,component:St}),a.a.createElement(p.b,{path:"/note/:id",component:gn}),a.a.createElement(p.b,{component:On}))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(xn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[308,1,2]]]);
//# sourceMappingURL=main.d3c79033.chunk.js.map