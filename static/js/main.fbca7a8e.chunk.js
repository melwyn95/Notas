(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{171:function(e,t,n){},182:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(e){var t=e.children,n=e.style,r=e.className;return a.a.createElement("span",{style:n,className:r},t)}},188:function(e){e.exports={document:{nodes:[{object:"block",type:"paragraph",nodes:[{object:"text",leaves:[{text:"    "}]}]}]}}},222:function(e,t,n){e.exports=n(470)},227:function(e,t,n){},23:function(e,t,n){"use strict";var r=n(0),a=Object(r.createContext)();t.a=a},25:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"g",function(){return f}),n.d(t,"f",function(){return m}),n.d(t,"a",function(){return b}),n.d(t,"h",function(){return h}),n.d(t,"e",function(){return v});var r=n(6),a=n.n(r),o=n(13),c=n(43),s=n(84),i=n(188),l=n(46),u={operation:"create_note"},d={operation:"get_all_notes"},p={operation:"delete_notes"},f={operation:"move_notes"},m={operation:"get_note_by_id"},b={operation:"change_note_color"},h={operation:"save_note"},v={operation:"get_notes_by_ids"},w=function(){var e=Object(o.a)(a.a.mark(function e(t,n,r){var o,c,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.transaction("folders","readonly"),c=o.objectStore("folders"),e.next=4,c.get(n);case 4:s=e.sent,r(s);case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}();t.i=function(e,t){switch(e){case u.operation:var n=t.idb,r=t.openedFolder,O=t.setOpenedFolder,j=t.changeRoute,g=(new Date).getTime();n.then(function(){var e=Object(o.a)(a.a.mark(function e(t){var n,o,c,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes","folders"],"readwrite"),o=n.objectStore("notes"),c=n.objectStore("folders"),e.next=5,c.get(r.id);case 5:return(s=e.sent).count+=1,c.put(s),o.add({color:l.a.label,content:"    ",previewContent:"    ",structuredContent:i,heading:"    ",folderId:r.id,creationTimestamp:g,lastModifiedTimestamp:g}),e.abrupt("return",n.complete);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){O(r),n.then(function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes"],"readonly"),r=n.objectStore("notes"),o=r.index("notesCreationTimestamp"),e.next=5,o.get(g);case 5:c=e.sent,j(c.id);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())});break;case d.operation:var E=t.idb,x=t.openedFolder,y=t.setFetching,k=t.setNotes,S=[];x&&E.then(function(e){y(!0);var t=e.transaction("notes","readonly").objectStore("notes").index("notesFolderId"),n=IDBKeyRange.only(x.id);return 1===x.id&&(n=void 0),t.openCursor(n)}).then(function e(t){if(t){if(2===t.value.folderId&&2!==x.id)return t.continue().then(e);var n=t.value;return S.push(n),t.continue().then(e)}}).then(function(){k(S),y(!1)});break;case p.operation:var C=t.idb,N=t.selection,F=t.openedFolder,I=t.setOpenedFolder;C.then(function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,c,s,i,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),r=t.transaction(["notes","folders"],"readwrite"),c=r.objectStore("notes"),s=r.objectStore("folders"),e.next=6,s.get(2);case 6:return i=e.sent,2===F.id?(N.map(function(e){return c.delete(e)}),i.count-=N.length):(l={},Promise.all(N.map(function(){var e=Object(o.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get(+t);case 2:n=e.sent,l[n.folderId]?l[n.folderId]+=1:l[n.folderId]=1,n.folderId=2,c.put(n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())).then(function(){l[1]=N.length,Object.keys(l).map(function(){var e=Object(o.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get(+t);case 2:(r=e.sent).count-=l[t],r.timestamp=n,s.put(r);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),i.count+=N.length,i.timestamp=n,s.put(i)})),e.abrupt("return",r.complete);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){C.then(function(e){return w(e,F.id,I)})});break;case f.operation:var D=t.idb,_=t.selection,T=t.openedFolder,R=t.setOpenedFolder,P=t.moveToFolderId;D.then(function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,c,s,i,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),r=t.transaction(["folders","notes"],"readwrite"),c=r.objectStore("notes"),s=r.objectStore("folders"),i={},e.next=7,s.get(+P);case 7:return l=e.sent,e.next=10,Promise.all(_.map(function(){var e=Object(o.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get(+t);case 2:return n=e.sent,i[n.folderId]?i[n.folderId]+=1:i[n.folderId]=1,n.folderId=l.id,e.abrupt("return",c.put(n));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 10:return 2===+P?i[1]=_.length:delete i[1],e.next=13,Promise.all(Object.keys(i).map(function(){var e=Object(o.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get(+t);case 2:return(r=e.sent).count-=i[t],r.timestamp=n,e.abrupt("return",s.put(r));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 13:return l.count+=_.length,l.timestamp=n,s.put(l),e.abrupt("return",r.complete);case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){D.then(function(e){return w(e,T.id,R)})});break;case m.operation:var z=t.noteId,A=t.idb,M=t.setNote,B=t.setValue;return A.then(function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes"],"readonly"),r=n.objectStore("notes"),e.next=4,r.get(Number.parseInt(z));case 4:o=e.sent,B(c.m.fromJSON(o.structuredContent)),M(o);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case b.operation:var H=t.note,J=t.idb,W=t.setNote,L=t.color;return J.then(function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes"],"readwrite"),r=n.objectStore("notes"),e.next=4,r.get(H.id);case 4:return(o=e.sent).color=L,r.put(o),e.abrupt("return",n.complete);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){J.then(function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes"],"readwrite"),r=n.objectStore("notes"),e.next=4,r.get(H.id);case 4:o=e.sent,W(o);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())});case h.operation:var K=t.idb,V=t.note,q=V.id,U=V.folderId,$=t.value,G=t.setNote,Q=s.a.serialize($);return K.then(function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o,c,s,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes","folders"],"readwrite"),r=n.objectStore("notes"),o=n.objectStore("folders"),e.next=5,r.get(q);case 5:return c=e.sent,e.next=8,o.get(U);case 8:return s=e.sent,i=(new Date).getTime(),c.content=Q,c.previewContent=Q.substr(0,80),c.structuredContent=$.toJSON(),c.lastModifiedTimestamp=i,s.timestamp=i,r.put(c),o.put(s),e.abrupt("return",n.complete);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){G&&K.then(function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction(["notes"],"readonly"),r=n.objectStore("notes"),e.next=4,r.get(q);case 4:o=e.sent,G(o);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())});case v.operation:var X=t.idb,Y=t.noteIds,Z=t.setNotes;return X.then(function(e){var t=e.transaction(["notes"],"readonly").objectStore("notes");Promise.all(Y.map(function(e){return t.get(e)})).then(function(e){return Z(e)})});default:console.log("INVALID_OPERATION")}}},288:function(e,t,n){},39:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(21),c=n(125),s=n.n(c);t.a=Object(o.withStyles)(function(e){return{root:{color:"#969696"}}})(function(e){var t=e.classes;return a.a.createElement("div",{style:{width:"100%",height:"50vh",display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement(s.a,Object.assign({className:t.root},e)))})},46:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o});var r={label:"white",value:"#f5f5f5",circleColor:"#e0e0e0",optionColor:"#fbc02d"},a=[r,{label:"red",value:"#ef9a9a",circleColor:"#ef5350",optionColor:"#ef5350"},{label:"green",value:"#a5d6a7",circleColor:"#43a047",optionColor:"#43a047"},{label:"blue",value:"#90caf9",circleColor:"#1e88e5",optionColor:"#1e88e5"},{label:"yellow",value:"#fff59d",circleColor:"#fbc02d",optionColor:"#fbc02d"}],o=function(e,t){var n=a.filter(function(t){return t.label===e})[0];return n?n[t]:r.value};t.b=a},470:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(24),c=n.n(o),s=(n(227),n(183)),i=n(184),l=n(202),u=n(185),d=n(203),p=n(57),f=n(44),m=n(20),b=n(131),h=n.n(b),v=n(39),w=(n(288),n(23)),O=n(83),j={operation:"delete",label:"Delete"},g={operation:"move",label:"Move"},E={operation:"restore",label:"Restore"},x=n(25),y=n(6),k=n.n(y),S=n(13),C={label:"Rename",operation:"open_rename_folder_modal"},N={label:"Delete",operation:"open_delete_folder_modal"},F="open_create_folder_modal",I="rename_folder",D="delete_folder",_="create_foler",T="get_all_notes_folder",R="get_all_folders",P=[C,N],z=function(){var e=Object(S.a)(k.a.mark(function e(t,n,r){var a,o,c,s,i,l,u,d,p,f,m,b,h,v,w,O,j,g,E,x,y;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===C.operation?3:e.t0===N.operation?6:e.t0===I?9:e.t0===D?12:e.t0===F?15:e.t0===_?19:e.t0===T?22:e.t0===R?25:28;break;case 3:return(0,r.setOpen)(I),e.abrupt("break",29);case 6:return(0,r.setOpen)(D),e.abrupt("break",29);case 9:return a=r.setOpenedFolder,o=r.idb,c=r.value,s=r.close,i=r.setSnackError,o.then(function(){var e=Object(S.a)(k.a.mark(function e(t){var r,a,o;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.transaction("folders","readwrite"),a=r.objectStore("folders"),e.next=4,a.get(n);case 4:return(o=e.sent).name=c,o.timestamp=(new Date).getTime(),a.put(o),e.abrupt("return",r.complete);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){o.then(function(){var e=Object(S.a)(k.a.mark(function e(t){var r,o,c;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.transaction("folders","readonly"),o=r.objectStore("folders"),e.next=4,o.get(n);case 4:c=e.sent,a(c),s();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}).catch(function(){i("A folder with the same name already exists.")}),e.abrupt("break",29);case 12:return l=r.setOpenedFolder,(u=r.idb).then(function(){var e=Object(S.a)(k.a.mark(function e(t){var r,a,o,c,s;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.transaction(["folders","notes"],"readwrite"),a=r.objectStore("folders"),o=r.objectStore("notes"),c=o.index("notesFolderId"),s=IDBKeyRange.only(n),e.next=7,c.openCursor(s).then(function e(t){if(t)return t.delete(t.primaryKey),t.continue().then(e)});case 7:return a.delete(n),e.abrupt("return",r.complete);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).then(function(){u.then(function(){var e=Object(S.a)(k.a.mark(function e(t){var n,r,a;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction("folders","readonly"),r=n.objectStore("folders"),e.next=4,r.get(1);case 4:a=e.sent,l(a);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}),e.abrupt("break",29);case 15:return d=r.setShowDropdown,p=r.setOpen,d(!1),p(_),e.abrupt("break",29);case 19:return f=r.idb,m=r.setOpenedFolder,b=r.value,h=r.close,v=r.setSnackError,f.then(function(e){var t=e.transaction("folders","readwrite"),n=t.objectStore("folders"),r=(new Date).getTime();return n.add({name:b,count:0,timestamp:r}),t.complete}).then(function(){f.then(function(){var e=Object(S.a)(k.a.mark(function e(t){var n,r,a,o;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction("folders","readonly"),r=n.objectStore("folders"),a=r.index("folderNames"),e.next=5,a.get(b);case 5:o=e.sent,m(o),h();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}).catch(function(){v("A folder with the same name already exists.")}),e.abrupt("break",29);case 22:return w=r.idb,O=r.setOpenedFolder,w.then(function(){var e=Object(S.a)(k.a.mark(function e(t){var r,a,o;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.transaction("folders","readonly"),a=r.objectStore("folders"),e.next=4,a.get(n);case 4:o=e.sent,O(o);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),e.abrupt("break",29);case 25:return j=r.idb,g=r.setFolders,E=r.foldersToExclude,x=void 0===E?[]:E,y=[],e.abrupt("return",j.then(function(e){return e.transaction("folders","readonly").objectStore("folders").openCursor()}).then(function e(t){if(t){if(x.includes(t.value.id))return t.continue().then(e);var n=t.value;return y.push(n),t.continue().then(e)}}).then(function(){g(y)}));case 28:console.log("INVALID_OPERATION");case 29:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),A=n(189),M=n(56),B=n.n(M),H=n(85),J=n.n(H),W=n(190),L=n.n(W),K=n(33),V=n.n(K),q=n(21),U={padding:"0 12px"},$=Object(q.withStyles)(function(e){return{heading:{lineHeight:"42px",fontSize:"16px",fontWeight:700}}})(function(e){var t=e.selection,n=e.setSelection,o=e.clearDropDown,c=e.notes,s=e.classes,i=Object(r.useCallback)(function(){n([])},[]),l=Object(r.useCallback)(function(){t.length===c.length?n([]):n(c.map(function(e){return e.id}))},[t]);Object(r.useEffect)(function(){return o()},[]);var u=Object(r.useMemo)(function(){return c.length===t.length},[t]);return a.a.createElement("div",{className:"container--selectionn-header"},a.a.createElement(V.a,{style:U,onClick:i},a.a.createElement(J.a,null)),a.a.createElement(B.a,{component:"h2",className:s.heading},1===t.length?"1 item selected":"".concat(t.length," items selected")),a.a.createElement(V.a,{style:U,onClick:l},a.a.createElement(L.a,{style:u?{color:"#1e88e5"}:{}})))}),G=n(30),Q=n.n(G),X=n(126),Y=n.n(X),Z=n(127),ee=n.n(Z),te=n(81),ne=n.n(te),re=Object(f.f)(function(e){var t=e.folders,n=e.setShowDropdown,o=e.openedFolder,c=e.setOpen,s=e.show,i=e.history;return!t&&s?a.a.createElement(v.a,null):a.a.createElement("div",{className:"container--list-item",style:s?{}:{maxHeight:0,opacity:0}},s&&t.map(function(e){return a.a.createElement(r.Fragment,{key:"list-item-".concat(e.id)},a.a.createElement("div",{className:"list-item",onClick:function(){return function(e,t){return t.push("/folder/".concat(e.id))}(e,i)}},a.a.createElement("div",{className:"list-item-label ".concat(o.id===e.id?"list-item-label__bold":"")},e.name),a.a.createElement("div",{className:"list-item-label ".concat(o.id===e.id?"list-item-label__bold":"")},e.count)),a.a.createElement("div",{className:"separator"}))}),s&&a.a.createElement("div",{className:"list-item",key:"new-folder",onClick:function(){z(F,void 0,{setShowDropdown:n,setOpen:c})}},a.a.createElement("div",{className:"new-folder-container"},a.a.createElement("div",{className:"plus-icon"},"+"),"New Folder")))}),ae=n(35),oe=n.n(ae),ce=n(80),se=n.n(ce),ie=(n(171),Object(q.withStyles)(function(e){return{root:{minHeight:125,minWidth:220,height:125},rootInput:{backgroundColor:"#eee",padding:10,margin:"0 10px"},buttonRoot:{width:"50%"},notchedOutline:{border:0}}})(function(e){var t=e.classes,n=e.openedFolder,o=e.close,c=e.setOpenedFolder,s=e.create,i=e.setSnackError,l=s?"New Folder":"Rename Folder",u=s&&_||I,d=Object(r.useContext)(w.a).idb,p=Object(r.useState)(s?"Unnamed Folder":n.name),f=Object(m.a)(p,2),b=f[0],h=f[1];return a.a.createElement(oe.a,{className:t.root},a.a.createElement("div",{className:"container--header-label"},l),a.a.createElement(se.a,{value:b,fullWidth:!0,InputProps:{classes:{input:t.rootInput,notchedOutline:t.notchedOutline}},onChange:function(e){return h(e.target.value)},variant:"outlined"}),a.a.createElement("div",{className:"container--buttons"},a.a.createElement(Q.a,{classes:{root:t.buttonRoot},onClick:function(){z(u,n.id,{setOpenedFolder:c,idb:d,value:b,close:o,setSnackError:i})}},"Ok"),a.a.createElement(Q.a,{classes:{root:t.buttonRoot},onClick:o}," Cancel")))})),le=Object(q.withStyles)(function(e){return{root:{minHeight:125,minWidth:220,height:125},buttonRoot:{width:"50%"}}})(function(e){var t=e.classes,n=e.close,o=e.openedFolder,c=e.setOpenedFolder,s=Object(r.useContext)(w.a).idb;return a.a.createElement(oe.a,{className:t.root},a.a.createElement("div",{className:"container--header-label"},"Delete Folder"),a.a.createElement("div",{className:"container--message"},"Delete ".concat(o.name," ?")),a.a.createElement("div",{className:"container--buttons"},a.a.createElement(Q.a,{classes:{root:t.buttonRoot},onClick:function(){z(D,o.id,{setOpenedFolder:c,idb:s}),n()}},"Delete"),a.a.createElement(Q.a,{classes:{root:t.buttonRoot},onClick:n},"Cancel")))}),ue=function(e,t,n,r,o){switch(e){case I:case _:return a.a.createElement(ie,{openedFolder:t,close:n,setOpenedFolder:r,create:e===_,setSnackError:o});case D:return a.a.createElement(le,{openedFolder:t,close:n,setOpenedFolder:r});default:return null}},de=function(e){var t=e.setShowDropdown,n=e.showDropdown,r=e.openedFolder.name;return a.a.createElement("div",{className:"container--dropdown"},a.a.createElement(Q.a,{onClick:function(e){e.stopPropagation(),t(!n)}},a.a.createElement("div",{className:"dropdown-content"},a.a.createElement("div",{className:"dropdown-text"},r),a.a.createElement("div",{className:n?"dropdown-icon dropdown-icon-rotate":"dropdown-icon"}))))},pe=function(e){var t=e.showDropdown,n=e.setShowDropdown,r=e.setAnchorEl;return function(e,t){return!e&&t&&!t.systemFolder}(t,e.openedFolder)&&a.a.createElement("div",{className:"container--more-options",style:t?{}:{maxHeight:0}},a.a.createElement(V.a,{onClick:function(e){e.stopPropagation(),r(e.currentTarget),n(!1)}},a.a.createElement("div",{className:"more-options"})))},fe=function(e){var t=e.anchorEl,n=e.setAnchorEl,r=e.openedFolder,o=e.setOpen,c=e.close;return a.a.createElement(Y.a,{anchorEl:t,open:Boolean(t),onClose:function(e){return n(null)}},P.map(function(e){return a.a.createElement(ee.a,{key:e.operation,style:{fontSize:14},onClick:function(t){z(e.operation,r.id,{setOpen:o,close:c})}},e.label)}))},me=function(e){var t=e.openedFolder,n=e.setOpenedFolder,o=e.setSnackError,c=e.showDropdown,s=e.setShowDropdown,i=Object(r.useState)([]),l=Object(m.a)(i,2),u=l[0],d=l[1],p=Object(r.useState)(null),f=Object(m.a)(p,2),b=f[0],h=f[1],v=Object(r.useContext)(w.a).idb,O=Object(r.useState)(null),j=Object(m.a)(O,2),g=j[0],E=j[1],x=Object(r.useCallback)(function(){E(!1),h(null)},[]);return Object(r.useEffect)(function(){z(R,void 0,{idb:v,setFolders:d})},[t]),a.a.createElement(r.Fragment,null,a.a.createElement("div",{className:"container--header"},a.a.createElement(de,{setShowDropdown:s,showDropdown:c,openedFolder:t}),a.a.createElement(pe,{showDropdown:c,setShowDropdown:s,setAnchorEl:h,openedFolder:t}),a.a.createElement(fe,{anchorEl:b,setAnchorEl:h,openedFolder:t,setOpen:E,close:x})),a.a.createElement(re,{folders:u,setShowDropdown:s,setOpen:E,openedFolder:t,show:c}),a.a.createElement(ne.a,{open:Boolean(g),onClose:x},ue(g,t,x,n,o)))},be=function(e){var t=e.selection,n=e.notes,r=e.setSelection,o=e.clearDropDown,c=Object(A.a)(e,["selection","notes","setSelection","clearDropDown"]);return t.length?a.a.createElement($,{selection:t,setSelection:r,clearDropDown:o,notes:n}):a.a.createElement(me,c)},he=n(180),ve=n(193),we=n.n(ve),Oe=n(117),je=n.n(Oe),ge=n(181),Ee=Object(ge.a)("\n    export function search(folderId, searchText) {\n            \n        return new Promise(function (resolve, reject) {\n            \n            var openRequest = indexedDB.open('notas', 1);\n\n            var dbPromise = new Promise(function (resolve1, reject1) {\n                openRequest.onsuccess = function(e) {\n                    resolve1(e.target.result);\n                };\n            }).then(function (db) {\n                var transaction = db.transaction(['notes'], 'readonly');\n                var store = transaction.objectStore('notes');\n                var index = store.index('notesFolderId');\n                var keyRange = folderId !== 1 ? IDBKeyRange.only(folderId) : undefined;\n                var filteredNoteIds = [];\n\n                var cursorPromise = new Promise(function (resolve2, reject2) {\n                    index.openCursor(keyRange).onsuccess = function (event) {\n                        var cursor = event.target.result;\n                        if(cursor) {\n                            var note = cursor.value;\n                            if (note.content.indexOf(searchText) >= 0) {\n                                filteredNoteIds.push(note.id)\n                            }\n                            cursor.continue();\n                        } else {\n                            resolve(filteredNoteIds);\n                        }\n                    };\n                });\n                \n            });\n        });\n    }\n"),xe=Object(he.debounce)(function(){var e=Object(S.a)(k.a.mark(function e(t,n,r,a){var o;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.search(t,n);case 2:o=e.sent,Object(x.i)(x.e.operation,{idb:r,noteIds:o,setNotes:a});case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),400),ye=Object(q.withStyles)(function(e){return{root:{minHeight:30,width:"100%",background:"#dcdcdc",borderRadius:"5px"},notchedOutline:{border:0},marginRight:{marginRight:"-20px"},marginLeft:{marginLeft:"-15px"},fontSize:{fontSize:"12px",padding:0,minHeight:30}}})(function(e){var t=e.classes,n=e.openedFolder,o=e.setNotes,c=Object(r.useContext)(w.a).idb,s=Object(r.useState)(""),i=Object(m.a)(s,2),l=i[0],u=i[1],d=Object(r.useCallback)(function(){xe(n.id,"",c,o),u("")},[n]);return a.a.createElement("div",{className:"container--search-bar"},a.a.createElement(se.a,{className:t.root,style:{fontSize:17},value:l,placeholder:"Search notes",onChange:function(e){xe(n.id,e.target.value,c,o),u(e.target.value)},variant:"outlined",InputProps:{startAdornment:a.a.createElement(je.a,{position:"start"},a.a.createElement(V.a,{className:t.marginLeft},a.a.createElement(we.a,{style:{fontSize:"17px"}}))),endAdornment:Boolean(l)&&a.a.createElement(je.a,{position:"end"},a.a.createElement(V.a,{className:t.marginRight,onClick:d},a.a.createElement(J.a,{style:{fontSize:"17px"}}))),classes:{input:t.fontSize,notchedOutline:t.notchedOutline}}}))}),ke=n(201),Se=n(128),Ce=n.n(Se),Ne=n(129),Fe=n.n(Ne),Ie=n(194),De=n.n(Ie),_e=n(195),Te=n.n(_e),Re=n(182),Pe=n(46),ze=function(e){var t=e.color;return{backgroundColor:Object(Pe.c)(t,"value"),position:"relative"}},Ae=Object(q.withStyles)(function(e){return{root:{height:"180px",width:"140px",boxSizing:"border-box",padding:"10px",margin:"5px"},content:{color:"#555",fontSize:"14px",textOverflow:"ellipsis",overflow:"hidden",height:"calc(100% - 35px)"}}})(function(e){var t=e.note,n=e.note.previewContent,o=e.classes,c=e.selection,s=e.setSelection,i=e.history,l=Object(r.useMemo)(function(){return c.includes(t.id)},[c,t.id]),u=Object(r.useCallback)(function(e){e.stopPropagation(),s(l?c.filter(function(e){return e!==t.id}):[].concat(Object(ke.a)(c),[t.id]))},[c,t.id]),d=Object(r.useCallback)(function(){i.push("/note/".concat(t.id))},[t.id]);return a.a.createElement(Ce.a,{className:o.root,style:ze(t),onClick:d},a.a.createElement("p",{className:o.content},a.a.createElement("strong",{style:{color:"#000"}},n.substr(0,20)),n.substr(20)),a.a.createElement("div",{className:"time-stamp-wrappper"},a.a.createElement(Re.a,{className:"text-view-content"},Object(O.a)(t.lastModifiedTimestamp))),a.a.createElement(Fe.a,{style:{position:"absolute",bottom:0,right:0,padding:"5px",zIndex:"2"},checked:l,icon:a.a.createElement(De.a,{style:{color:"#1e88e5"}}),checkedIcon:a.a.createElement(Te.a,{style:{color:"#1e88e5"}}),onClick:u}))}),Me=function(){return a.a.createElement("div",{style:{margin:"50px auto",alignSelf:"center",fontSize:"18px",fontWeight:500,color:"#6d6d6d"}},"No Notes Here")},Be=Object(f.f)(Object(r.memo)(function(e){var t=e.selection,n=e.setSelection,r=e.fetching,o=e.notes,c=e.history;return a.a.createElement("div",{className:"container--notes"},Boolean(o.length)?o.map(function(e){return a.a.createElement(Ae,{key:e.creationTimestamp,note:e,history:c,selection:t,setSelection:n})}):r?a.a.createElement(v.a,null):a.a.createElement(Me,null))},function(e,t){var n=e.notes,r=e.selection,a=e.fetching,o=t.notes,c=t.selection,s=t.fetching;return n===o&&r===c&&a===s})),He=n(130),Je=n.n(He),We=n(196),Le=n.n(We),Ke=Object(f.f)(Object(q.withStyles)(function(e){return{fabRoot:{backgroundColor:"#ffc400","&:hover":{backgroundColor:"#ffab00"}},iconRoot:{color:"#fff",fontSize:"35px"}}})(function(e){var t=e.history,n=e.classes,o=e.openedFolder,c=e.setOpenedFolder,s=e.show,i=Object(r.useContext)(w.a).idb,l=Object(r.useCallback)(function(e){t.replace("/note/".concat(e))},[]),u=Object(r.useCallback)(function(){Object(x.i)(x.b.operation,{idb:i,openedFolder:o,setOpenedFolder:c,changeRoute:l})},[o]);return s&&a.a.createElement("div",{className:"container--add-notes"},a.a.createElement(Je.a,{className:n.fabRoot,onClick:u},a.a.createElement(Le.a,{className:n.iconRoot})))})),Ve=n(197),qe=n.n(Ve),Ue=n(199),$e=n.n(Ue),Ge=n(198),Qe=n.n(Ge),Xe=n(90),Ye=n.n(Xe),Ze=n(82),et=n.n(Ze),tt=n(118),nt=n.n(tt),rt=n(119),at=n.n(rt),ot=function(e){var t=e.option,n=e.className,r=e.Icon,o=e.callback;return a.a.createElement("div",{className:"container--bottom-tool-button"},a.a.createElement(Q.a,{className:n,onClick:o},a.a.createElement(r,null),a.a.createElement("span",{className:"bottom-button-text"},t.label)))},ct=Object(q.withStyles)(function(e){return{buttonRoot:{width:"100%",height:"100%"},listItemPrimary:{maxWidth:"175px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},flexJustifyCenter:{display:"flex",justifyContent:"center"}}})(function(e){var t=e.classes,n=e.options,o=e.show,c=e.openedFolder,s=e.selection,i=e.setOpenedFolder,l=e.setSelection,u=(e.setCreateDialogOpen,Object(r.useContext)(w.a).idb),d=Object(r.useState)(!1),p=Object(m.a)(d,2),f=p[0],b=p[1],h=Object(r.useState)([]),v=Object(m.a)(h,2),O=v[0],y=v[1],C=Object(r.useCallback)(function(){Object(x.i)(x.c.operation,{idb:u,selection:s,openedFolder:c,setOpenedFolder:i}),l([])},[s]),N=Object(r.useCallback)(function(e){Object(x.i)(x.g.operation,{idb:u,selection:s,openedFolder:c,setOpenedFolder:i,moveToFolderId:e}),l([]),F()},[s]),F=Object(r.useCallback)(function(){b(!1)},[]),I=Object(r.useCallback)(Object(S.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[c.id],e.next=3,z(R,c.id,{idb:u,setFolders:y,foldersToExclude:t});case 3:b(!0);case 4:case"end":return e.stop()}},e,this)})),[c]);return a.a.createElement("div",{className:"container--bottom-toolbar",style:o?{}:{height:0}},n.map(function(e){return a.a.createElement(ot,Object.assign({key:e.operation,className:t.buttonRoot},function(e){switch(e.operation){case g.operation:return{option:e,Icon:qe.a,callback:I};case E.operation:return{option:e,Icon:Qe.a,callback:function(){return N(1)}};case j.operation:return{option:e,Icon:$e.a,callback:C};default:return function(){}}}(e)))}),a.a.createElement(ne.a,{open:f,onClose:F,scroll:"paper"},a.a.createElement(et.a,null,a.a.createElement(nt.a,{primary:"Select Folder",classes:{primary:t.flexJustifyCenter}})),a.a.createElement(at.a,null),a.a.createElement(Ye.a,{style:{maxHeight:"80vh",padding:0}},O.map(function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(et.a,{button:!0,classes:{root:t.flexJustifyCenter},onClick:function(){return N(e.id)},key:e.id},a.a.createElement(nt.a,{primary:e.name,classes:{primary:t.listItemPrimary}})),a.a.createElement(at.a,null))}))))}),st=function(e){var t=e.match,n=Object(r.useContext)(w.a).idb,o=Object(r.useState)(null),c=Object(m.a)(o,2),s=c[0],i=c[1],l=Object(r.useState)(null),u=Object(m.a)(l,2),d=u[0],p=u[1],f=Object(r.useState)(!1),b=Object(m.a)(f,2),y=b[0],k=b[1],S=Object(r.useState)([]),C=Object(m.a)(S,2),N=C[0],F=C[1],I=Object(r.useState)([]),D=Object(m.a)(I,2),_=D[0],R=D[1],P=Object(r.useState)(!0),A=Object(m.a)(P,2),M=A[0],B=A[1],H=Object(r.useMemo)(function(){return(e=s)&&[Object(O.b)(e)?E:g,j]||[];var e},[s]),J=Object(r.useCallback)(function(){k(!1)},[]),W=Object(r.useCallback)(function(){p(null)},[]),L=0!==N.length,K=s&&2===s.id;return Object(r.useEffect)(function(){var e=Number.parseInt(t.params.id);z(T,e,{idb:n,setOpenedFolder:i})},[t]),Object(r.useEffect)(function(){Object(x.i)(x.d.operation,{idb:n,openedFolder:s,setFetching:B,setNotes:R})},[s]),s?a.a.createElement("div",{className:"container--home-page",onClick:J},a.a.createElement(be,{openedFolder:s,setOpenedFolder:i,setSnackError:p,showDropdown:y,setShowDropdown:k,notes:_,selection:N,clearDropDown:J,setSelection:F}),a.a.createElement(ye,{openedFolder:s,setNotes:R}),a.a.createElement(Be,{fetching:M,notes:_,selection:N,setSelection:F}),a.a.createElement(Ke,{openedFolder:s,setOpenedFolder:i,fetching:M,notes:_,show:!L&&!K}),a.a.createElement(ct,{options:H,show:L,selection:N,openedFolder:s,setSelection:F,setOpenedFolder:i}),a.a.createElement(h.a,{open:Boolean(d),autoHideDuration:2e3,onClose:W,message:d})):a.a.createElement(v.a,null)},it=n(200),lt=n(84),ut="This is default note ........................",dt=(new Date).getTime(),pt=function(){return Object(it.openDb)("notas",1,function(e){switch(e.oldVersion){case 0:case 1:var t=e.createObjectStore("folders",{keyPath:"id",autoIncrement:!0});t.createIndex("folderNames","name",{unique:!0}),t.add({count:1,timestamp:(new Date).getTime(),name:"All Notes",systemFolder:!0}),t.add({count:0,timestamp:(new Date).getTime(),name:"Trash",systemFolder:!0});var n=e.createObjectStore("notes",{keyPath:"id",autoIncrement:!0});n.createIndex("notesCreationTimestamp","creationTimestamp"),n.createIndex("notesLastModifiedTimestamp","lastModifiedTimestamp"),n.createIndex("notesFolderId","folderId"),n.add({color:Pe.a.label,content:ut,previewContent:ut.substr(0,80),structuredContent:lt.a.deserialize(ut).toJSON(),folderId:1,creationTimestamp:dt,lastModifiedTimestamp:dt})}})},ft=a.a.lazy(function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,573))}),mt=a.a.lazy(function(){return n.e(5).then(n.bind(null,572))}),bt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).idb=pt(),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement(w.a.Provider,{value:{idb:this.idb}},a.a.createElement(r.Suspense,{fallback:a.a.createElement(v.a,null)},a.a.createElement(p.a,{basename:"/Notas"},a.a.createElement(f.d,null,a.a.createElement(f.b,{path:"/",exact:!0,component:function(e){return a.a.createElement(f.a,{to:{pathname:"/folder/1",state:{from:e.location}}})}}),a.a.createElement(f.b,{path:"/folder/:id",exact:!0,component:st}),a.a.createElement(f.b,{path:"/note/:id",component:ft}),a.a.createElement(f.b,{component:mt})))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(bt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},83:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c});var r=n(20),a=function(e){return 2===e.id},o=function(e,t){var n=e>12?"PM":"AM";return"".concat(e%12||12,":").concat(t," ").concat(n)},c=function(e){var t=(new Date).getTime()-e,n=new Date(e),a=n.toDateString(),c=n.toTimeString().split(":"),s=Object(r.a)(c,2),i=s[0],l=s[1],u=a.split(" "),d=Object(r.a)(u,4),p=d[0],f=d[1],m=d[2],b=d[3],h=o(i,l);return t<=864e5?o(i,l):t<=6048e5?"".concat(p," ").concat(h):t<=24192e5?"".concat(p," ").concat(m," ").concat(h):t<=314496e5?"".concat(p," ").concat(m," ").concat(f):"".concat(m," ").concat(f," ").concat(b)}}},[[222,1,2]]]);
//# sourceMappingURL=main.fbca7a8e.chunk.js.map